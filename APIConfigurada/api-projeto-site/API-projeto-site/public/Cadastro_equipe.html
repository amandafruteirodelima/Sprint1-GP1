<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/Cadastro_equipe.css">
    <link rel="stylesheet" href="./css/headerDark.css">
    <link rel="icon" href="img/Yin-Yang-DevTime.png">
    <title>Cadastro de equipe</title>
</head>

<body>
    <!--Início Header-->

    <div class="divHeader">

        <div class="container-header">

            <div class="divImagem"><a href="Dashboard_adm.html"><img src="./img/Logo-Branco.png" alt="Logo DevTime"></a>
            </div>

            <nav class="divLista">
                <ul>
                    <li><a class="li-comum" href="Dashboard_adm.html">Dashboard</a></li>
                    <li><a class="li-comum" href="Ranking_adm.html">Ranking</a></li>
                    <li><a class="li-select" href="Cadastro_equipe.html">Equipes</a></li>
                    <li><a class="li-comum" href="Cadastro.html">Cadastro</a></li>
                    <li><a class="li-comum" href="Dashboard_selecao_componentes.html">Componentes</a></li>
                </ul>

            </nav>

            <div class="divButton"><button><a class="li-comum" href="Login.html">Sair</a></button></div>

        </div>

    </div>
    <!--Fim Header-->

    <main>
        <div class="div_titulo">
            <h1>&lt;Crie ou delete uma equipe/&gt;</h1>
        </div>
        <div class="div-forms">
            <div class="div_first_form">
                <form id="form_cadastro_equipe" method="post">

                    <div class="div-criar">
                        <input id="inp_nome_equipe" name="nome" class="inptPadrao" type="text" placeholder=" " required>

                        <label class="label label-nome" for="nome">Nome da nova equipe</label>


                        <button class="btn-default" type="submit" onclick="return criar()"><a><b>Criar</b></a></button>
                        <button class="btn-default" type="submit"
                            onclick="return deletar()"><a><b>Deletar</b></a></button>
                    </div>
                </form>
            </div>
            <h1>&lt;Adicione ou remova um funcionario de uma equipe/&gt;</h1>
            <div>
                <form id="form_adicionar" method="post">
                    <div class="div-adicionar">
                        <div class="div-selects">

                            <input id="sel_equipe" name="nome_equipe" class="inptPadrao" type="text" placeholder=" "
                                required>
                            <label class="label label_nome_equipe" for="nome_equipe">Nome da equipe</label>

                            <input id="sel_funcionario" name="nome_funcionario" class="inptPadrao" type="text"
                                placeholder=" " required>
                            <label class="label label_nome_funcionario" for="nome_funcionario">Nome do
                                funcionario</label>

                        </div>

                        <button class="btn-default" type="submit"
                            onclick="return adicionar()"><a><b>Adicionar</b></a></button>

                        <button class="btn-default" type="submit"
                            onclick="return remover()"><a><b>Remover</b></a></button>

                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Início do footer  -->
    <div class="footer">

        <div class="company">

            <a href="#"><img src="img/Logo-Branco.png" alt="Logo da DevTime"></a>
            |
            <a href="#"><img src="img/logo_bandtec.png" alt="Logo da Faculdade BandTec"></a>
        </div>

        <div>
            <h3 class="copyright">Copyright © 2021 - Todos os direitos reservados - DevTime</h3>
        </div>

    </div>
    <!-- Fim do footer  -->

</body>

</html>
<script>

    function criar() {

        var formulario = new URLSearchParams(new FormData(form_cadastro_equipe));
        fetch("/equipes/criar", {
            method: "POST",
            body: formulario
        }).then(function (response) {

            if (response.ok) {

                window.location.href = 'Cadastro_equipe.html';
                alert("Equipe criada com sucesso")

            } else {

                alert('Erro de cadastro!');

            }
        });

        return false;
    }

    function adicionar() {

        var formulario_add = new URLSearchParams(new FormData(form_adicionar));
        fetch("/equipes/adicionar", {
            method: "POST",
            body: formulario_add
        }).then(function (response) {

            if (response.ok) {

                alert("Funcionario adicionado com sucesso")

            } else {

                alert('Falha na adição do funcionario');

            }
        });

        return false;
    }

    function remover() {

        var formulario_add = new URLSearchParams(new FormData(form_adicionar));
        fetch("/equipes/remover", {
            method: "POST",
            body: formulario_add
        }).then(function (response) {

            if (response.ok) {

                alert("Funcionario removido com sucesso")

            } else {

                alert('Falha na remoção do funcionario');

            }
        });

        return false;
    }

    function deletar() {

        var formulario = new URLSearchParams(new FormData(form_cadastro_equipe));
        fetch("/equipes/deletar", {
            method: "POST",
            body: formulario
        }).then(function (response) {

            if (response.ok) {

                alert("Equipe deletada com sucesso")

            } else {

                alert('Falha na deleção');

            }
        });

        return false;
    }
</script>